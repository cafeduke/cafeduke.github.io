<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta data -->
    <meta charset="utf-8">
<meta name="viewport" content="initial-scale=1, shrink-to-fit=no, width=device-width">
<meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- Window title -->
    <title>Bias, Variance &amp; data mismatch during multiple distributions</title>

    <!-- CSS -->
    <!-- Material fonts from 'https://fonts.google.com' -->
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,300i,400,400i,500,500i,700,700i" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css?family=Vollkorn:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"> 

<!-- Material Icon -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- Font Awesome Icon -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

<!-- Add Material CSS. Replace Bootstrap CSS -->
<link href="/assets/daemonite-material/css/material.min.css" rel="stylesheet">

<!-- Material Color Palette - CSS Classes -->
<link href="/assets/material-design-color-palette/css/material-design-color-palette.css" rel="stylesheet">

<!-- CafeDuke CSS - Project specific Classes  -->
<link href="/assets/css/main.css" rel="stylesheet" type="text/css">

<!-- CafeDuke Syntax CSS - Code syntax highlight -->
<link href="/assets/css/duke-dark.css" rel="stylesheet" type="text/css">


<script>MathJax={"tex":{"inlineMath":[["$","$"],["\\(","\\)"]],"displayMath":[["$$","$$"],["\\[","\\]"]]},"svg":{"fontCache":"global"},"svg":{"fontCache":"global"}}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

    <!-- Navigation bar -->
    <nav class="navbar navbar-expand-lg navbar-dark mdc-bg-purple-900">
    
    

    <!-- Collapse Icon -->
    <a id="sidebar-toggle" class="navbar-brand text-white" href="">
        <i class="material-icons md-24">menu</i>
    </a>

    <!-- NavBar Heading -->
    <a class="navbar-brand text-white" href="/">Cafe Duke Notes</a>

    <!-- Collapse button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">

        <!-- Links -->
        <ul class="navbar-nav mr-auto">


        </ul>
        <!-- Links -->

        <!-- Search form
        <form class="form-inline">
            <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
        </form>
         -->

    </div>
    <!-- Collapsible content -->

</nav>


    <!-- Row: Content -->
    <div class="container-fluid m-0 p-0 h-100">

        <div class="row h-100 no-gutters">

            <!-- Column: Sidebar -->
            <div id="sidebar">

    <ul class="nav flex-column">

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/">
                <i class="fas fa-home fa-lg"></i>
                <span class="nav-link-text">Home</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/java">
                <i class="fab fa-java fa-2x"></i>
                <span class="nav-link-text">Java</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/git">
                <i class="fab fa-git fa-lg"></i>
                <span class="nav-link-text">Git</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/cloud">
                <i class="material-icons md-24">cloud</i>
                <span class="nav-link-text">Cloud</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" data-toggle="collapse" data-target="#child-dl" href="#">
                <i class="fas fa-cogs fa-lg"></i>
                <span class="nav-link-text">Deep Learning</span>
            </a>
            <div id="child-dl" class="collapse">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center" href="/deeplearning">
                            <span class="nav-link-text">Core</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center" href="/deeplearning/strategy">
                            <span class="nav-link-text">Strategy</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center" href="/deeplearning/cnn">
                            <span class="nav-link-text">CNN</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center" href="/deeplearning/rnn">
                            <span class="nav-link-text">RNN</span>
                        </a>
                    </li>
                </ul>
            </div>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/django">
                <i class="fa fa-lg">dj</i>
                <span class="nav-link-text">Django</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/spring">
                <i class="fas fa-leaf fa-lg"></i>
                <span class="nav-link-text">Spring</span>
            </a>
        </li>

    </ul>
</div>


            <!-- Column: Content Wrapper -->
            <div class="col">
                <div id="content" class="w-100">
<div id="post-wrap" class="row d-flex justify-content-center">

    <div class="card col-md-10 col-xs-12 mt-5">

        <div class="card-header">
            <h1 class="post-title">Bias, Variance &amp; data mismatch during multiple distributions</h1>
            <h6 class="card-subtitle post-meta"> 
                Friday, 8 December 2017
                
            </h6>            
        </div>

        <hr class="post-ruler">

        <div class="card-body">
            <nav>
  <h4>Table of Contents</h4>
<ol id="markdown-toc">
  <li><a href="#data-mismatch" id="markdown-toc-data-mismatch">Data mismatch</a></li>
  <li><a href="#the-training-dev-dataset" id="markdown-toc-the-training-dev-dataset">The training-dev dataset</a></li>
  <li>
<a href="#diagnose-model" id="markdown-toc-diagnose-model">Diagnose model</a>    <ol>
      <li><a href="#identifying-data-mismatch" id="markdown-toc-identifying-data-mismatch">Identifying data mismatch</a></li>
      <li><a href="#case-analysis" id="markdown-toc-case-analysis">Case analysis</a></li>
    </ol>
  </li>
  <li>
<a href="#fix-data-mismatch" id="markdown-toc-fix-data-mismatch">Fix data mismatch</a>    <ol>
      <li><a href="#data-mismatch-case-analysis" id="markdown-toc-data-mismatch-case-analysis">Data-mismatch case analysis</a></li>
    </ol>
  </li>
</ol>

</nav>

<h1 id="data-mismatch">Data mismatch</h1>

<p>Consider the following scenario</p>

<table>
  <thead>
    <tr>
      <th>Dataset</th>
      <th>Percentage error</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Human</td>
      <td>0%</td>
    </tr>
    <tr>
      <td>Training</td>
      <td>1%</td>
    </tr>
    <tr>
      <td>Dev</td>
      <td>10%</td>
    </tr>
    <tr>
      <td>Test</td>
      <td>11%</td>
    </tr>
  </tbody>
</table>

<p>Single distribution across training, dev and test</p>

<ul>
  <li>Variance - overfitting the training set.</li>
</ul>

<p>Different distribution for training compared to dev/test</p>

<ul>
  <li>Could be variance</li>
  <li>Could be because model is seeing new type of data never seen during training $$\rightarrow$$ <strong>Data mismatch</strong>
</li>
</ul>

<p>Essentially, when training data is from different distribution and test/dev is from another, we cannot point out the issue with the model. Without knowing the issue we cannot fix.</p>

<h1 id="the-training-dev-dataset">The training-dev dataset</h1>

<p>Two things have changed in our dev set</p>

<ul>
  <li>The usual change $$\rightarrow$$ Dev data is new (unseen by model during training)</li>
  <li>The new change $$\rightarrow$$ Dev data distribution is new from the training data distribution.</li>
</ul>

<p>Since two things have changed we cannot narrow down to which change has increased dev error.</p>

<blockquote>

  <p>A <strong>training-dev</strong> dataset has following properties</p>

  <ul>
    <li>Has the same size as dev and test datasets</li>
    <li>Has the same distribution as training dataset (Scooped from training set)</li>
    <li>Like dev, training-dev is <strong>not</strong> part of model training</li>
  </ul>

</blockquote>

<h1 id="diagnose-model">Diagnose model</h1>

<h2 id="identifying-data-mismatch">Identifying data mismatch</h2>

<p>The below diagram depicts what the difference between various errors indicate</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Human           +---+
                    |-----&gt; Avoidable Bias    
Training        +---+
                    |-----&gt; Variance
Training-dev    +---+
                    |-----&gt; Data mismatch
Dev             +---+
                    |-----&gt; Dev overfiting
Test            +---+
</code></pre></div></div>

<h2 id="case-analysis">Case analysis</h2>

<table>
  <thead>
    <tr>
      <th>Dataset</th>
      <th style="text-align: center">Case A</th>
      <th style="text-align: center">Case B</th>
      <th style="text-align: center">Case C</th>
      <th style="text-align: center">Case D</th>
      <th style="text-align: center">Case E</th>
      <th style="text-align: center">Case F</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Human</td>
      <td style="text-align: center">0%</td>
      <td style="text-align: center">0%</td>
      <td style="text-align: center">0%</td>
      <td style="text-align: center">0%</td>
      <td style="text-align: center">4%</td>
      <td style="text-align: center">4%</td>
    </tr>
    <tr>
      <td>Training</td>
      <td style="text-align: center">1%</td>
      <td style="text-align: center">1%</td>
      <td style="text-align: center">10%</td>
      <td style="text-align: center">10%</td>
      <td style="text-align: center">7%</td>
      <td style="text-align: center">7%</td>
    </tr>
    <tr>
      <td>Training-dev</td>
      <td style="text-align: center">9%</td>
      <td style="text-align: center">1.5%</td>
      <td style="text-align: center">11%</td>
      <td style="text-align: center">11%</td>
      <td style="text-align: center">10%</td>
      <td style="text-align: center">10%</td>
    </tr>
    <tr>
      <td>Dev</td>
      <td style="text-align: center">10%</td>
      <td style="text-align: center">10%</td>
      <td style="text-align: center">12%</td>
      <td style="text-align: center">20%</td>
      <td style="text-align: center">12%</td>
      <td style="text-align: center">6%</td>
    </tr>
    <tr>
      <td>Test</td>
      <td style="text-align: center">11%</td>
      <td style="text-align: center">11%</td>
      <td style="text-align: center">13%</td>
      <td style="text-align: center">21%</td>
      <td style="text-align: center">13%</td>
      <td style="text-align: center">6.1%</td>
    </tr>
    <tr>
      <td><strong>Verdict</strong></td>
      <td style="text-align: center">\[Variance\]
</td>
      <td style="text-align: center">\[Data-mismatch\]
</td>
      <td style="text-align: center">\[Bias\]
</td>
      <td style="text-align: center">\[Bias \ + \ Data-mismatch\]
</td>
      <td style="text-align: center">\[Bias=3 \ Variance=3\Data-mismatch=2\]
</td>
      <td style="text-align: center">\[Dev \ easier\]
</td>
    </tr>
  </tbody>
</table>

<p><strong>Case E</strong></p>

<ul>
  <li>We have bias and variance as well as some amount of data mismatch</li>
</ul>

<p><strong>Case F</strong></p>

<ul>
  <li>The model seems to have bias and variance</li>
  <li>The model however performed better on the dev and test datasets $$\rightarrow$$ This is what we really care about</li>
  <li>This happens if training data is harder while the actual data (test/dev) is easier for the model resulting in lesser error.</li>
  <li>Since the error in the test is closer to human error, it can used in production.</li>
</ul>

<h1 id="fix-data-mismatch">Fix data mismatch</h1>

<p>There are no well laid out mechanisms to fix data mismatch. One obvious way is manually looking into the failed dev set examples, perhaps certain cases were never considered during training. For example, baby cheetah images in dev set misclassified as cat. We can now add a lot of baby lion, tiger and cheetah images to the training set.</p>

<p>Another useful method is work on the following table for intuition.</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: center">Distribution A</th>
      <th style="text-align: center">Distribution B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Human Level</td>
      <td style="text-align: center">A</td>
      <td style="text-align: center">X</td>
    </tr>
    <tr>
      <td>Error on data seen by model</td>
      <td style="text-align: center">B</td>
      <td style="text-align: center">Y</td>
    </tr>
    <tr>
      <td>Error on data not seen by model</td>
      <td style="text-align: center">C</td>
      <td style="text-align: center">Z</td>
    </tr>
  </tbody>
</table>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>B - A = Avoidable bias
C - B = Variance
Z - C = Data mismatch
X     = Human error on real world data
Y     = Training error using only real world data
</code></pre></div></div>

<h2 id="data-mismatch-case-analysis">Data-mismatch case analysis</h2>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: center">Distribution A</th>
      <th style="text-align: center">Distribution B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Human Level</td>
      <td style="text-align: center">A = 6%</td>
      <td style="text-align: center">X = 12%</td>
    </tr>
    <tr>
      <td>Error on data seen by model</td>
      <td style="text-align: center">B = 7%</td>
      <td style="text-align: center">Y = 13%</td>
    </tr>
    <tr>
      <td>Error on data not seen by model</td>
      <td style="text-align: center">C = 8%</td>
      <td style="text-align: center">Z = 13%</td>
    </tr>
  </tbody>
</table>

<p>Considering A, B, C and Z we see that</p>

<ul>
  <li>Model has only 1% avoidable bias and only 1% variance.</li>
  <li>The data-mismatch is  5% (relatively high)</li>
  <li>Filling X, tells us that even humans are not great at dealing with Distribution-B</li>
  <li>Filling Y, tells us that that model when trained using only Distribution-B performs comparable to humans</li>
</ul>

<p>Essentially, the model is doing the best and it is the distribution that needs betterment. For example, perhaps the camera quality went bad or is covered by fog and the robot took bad pictures.  Filling X and Y may give better intuition.</p>

        </div>

        <div class="card-footer">
            
        </div>

    </div>

</div>
</div>
                <!-- <div id="footer" class="w-100"><div class="footer">
    <div class="footer-col footer-col-1">
    <ul class="contact-list">
      <li>
        <span class="site-author">
           
             Raghunandan.Seshadri
           
        </span>
      </li>

      
      <li><a href="mailto:raghubs81@gmail.com">raghubs81@gmail.com</a></li>
      

      
      <li>
        <a href="https://github.com/cafeduke"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">cafeduke</span></a>

      </li>
      

    </ul>
    </div>

    <div class="footer-col footer-col-2">
     <ul class="contact-list">
        
           <li>Duke notes. Happy learning!</li>
        
     </ul>
    </div>
</div></div> -->
            </div>
        </div>
    </div>

    <!-- JS -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>

<!-- Popper -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>

<!-- Bootstrap -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<!-- Material JavaScript on top of Bootstrap JavaScript -->
<script src="/assets/daemonite-material/js/material.min.js"></script>

<!-- Include and configure MathJax -->
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({
      jax: ["input/AsciiMath", "input/TeX", "input/MathML", "output/HTML-CSS"],
      asciimath2jax: {
         delimiters: [['`','`'], ['$$','$$'], ['$','$']]
      },
      "HTML-CSS": {
         preferredFont:"TeX", availableFonts:["STIX","TeX"]
      }
   });
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>

<script src="/assets/js/mermaid.min.js"></script>

<!-- Google analytics -->


<!-- Sidebar -->
<script src="/assets/js/sidebar.js"></script>



   </body>

</html>
