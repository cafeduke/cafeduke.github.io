<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta data -->
    <meta charset="utf-8">
<meta name="viewport" content="initial-scale=1, shrink-to-fit=no, width=device-width">
<meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- Window title -->
    <title>Hot Spot</title>

    <!-- CSS -->
    <!-- Material fonts from 'https://fonts.google.com' -->
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,300i,400,400i,500,500i,700,700i" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css?family=Vollkorn:300,300i,400,400i,500,500i,700,700i" rel="stylesheet"> 

<!-- Material Icon -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- Font Awesome Icon -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

<!-- Add Material CSS. Replace Bootstrap CSS -->
<link href="/assets/daemonite-material/css/material.min.css" rel="stylesheet">

<!-- Material Color Palette - CSS Classes -->
<link href="/assets/material-design-color-palette/css/material-design-color-palette.css" rel="stylesheet">

<!-- CafeDuke CSS - Project specific Classes  -->
<link href="/assets/css/main.css" rel="stylesheet" type="text/css">

<!-- CafeDuke Syntax CSS - Code syntax highlight -->
<link href="/assets/css/duke-dark.css" rel="stylesheet" type="text/css">


</head>
<body>

    <!-- Navigation bar -->
    <nav class="navbar navbar-expand-lg navbar-dark mdc-bg-purple-900">
    
    

    <!-- Collapse Icon -->
    <a id="sidebar-toggle" class="navbar-brand text-white" href="">
        <i class="material-icons md-24">menu</i>
    </a>

    <!-- NavBar Heading -->
    <a class="navbar-brand text-white" href="/">Cafe Duke Notes</a>

    <!-- Collapse button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">

        <!-- Links -->
        <ul class="navbar-nav mr-auto">


        </ul>
        <!-- Links -->

        <!-- Search form
        <form class="form-inline">
            <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
        </form>
         -->

    </div>
    <!-- Collapsible content -->

</nav>


    <!-- Row: Content -->
    <div class="container-fluid m-0 p-0 h-100">

        <div class="row h-100 no-gutters">

            <!-- Column: Sidebar -->
            <div id="sidebar">

    <ul class="nav flex-column">

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/">
                <i class="fas fa-home fa-lg"></i>
                <span class="nav-link-text">Home</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/java">
                <i class="fab fa-java fa-2x"></i>
                <span class="nav-link-text">Java</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/git">
                <i class="fab fa-git fa-lg"></i>
                <span class="nav-link-text">Git</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/cloud">
                <i class="material-icons md-24">cloud</i>
                <span class="nav-link-text">Cloud</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" data-toggle="collapse" data-target="#child-dl" href="#">
                <i class="fas fa-cogs fa-lg"></i>
                <span class="nav-link-text">Deep Learning</span>
            </a>
            <div id="child-dl" class="collapse">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center" href="/deeplearning">
                            <span class="nav-link-text">Core</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center" href="/deeplearning/strategy">
                            <span class="nav-link-text">Strategy</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center" href="/deeplearning/cnn">
                            <span class="nav-link-text">CNN</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-flex align-items-center" href="/deeplearning/rnn">
                            <span class="nav-link-text">RNN</span>
                        </a>
                    </li>
                </ul>
            </div>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/django">
                <i class="fa fa-lg">dj</i>
                <span class="nav-link-text">Django</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="/spring">
                <i class="fas fa-leaf fa-lg"></i>
                <span class="nav-link-text">Spring</span>
            </a>
        </li>

    </ul>
</div>


            <!-- Column: Content Wrapper -->
            <div class="col">
                <div id="content" class="w-100">
<div id="post-wrap" class="row d-flex justify-content-center">

    <div class="card col-md-10 col-xs-12 mt-5">

        <div class="card-header">
            <h1 class="post-title">Hot Spot</h1>
            <h6 class="card-subtitle post-meta"> 
                Sunday, 1 January 2017
                
            </h6>            
        </div>

        <hr class="post-ruler">

        <div class="card-body">
            <nav>
  <h4>Table of Contents</h4>
<ol id="markdown-toc">
  <li>
<a href="#hot-spot" id="markdown-toc-hot-spot">Hot Spot</a>    <ol>
      <li><a href="#interpreter" id="markdown-toc-interpreter">Interpreter</a></li>
      <li><a href="#compiler" id="markdown-toc-compiler">Compiler</a></li>
      <li><a href="#javac---java-file-is-compiled" id="markdown-toc-javac---java-file-is-compiled">Javac - .java file is compiled</a></li>
      <li><a href="#class-file" id="markdown-toc-class-file">Class File</a></li>
      <li><a href="#java---class-file-is-compiled-and-interpreted-hotspot" id="markdown-toc-java---class-file-is-compiled-and-interpreted-hotspot">Java - .class file is compiled and interpreted (HotSpot)</a></li>
    </ol>
  </li>
</ol>

</nav>

<h1 id="hot-spot">Hot Spot</h1>

<p>Ever wondered about “HotSpot in the Java version?</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">C:</span><span class="err">\\</span><span class="nc">Users</span><span class="err">\\</span><span class="nc">Raghu</span><span class="o">&gt;</span> <span class="n">java</span> <span class="o">-</span><span class="n">version</span>  
<span class="n">java</span> <span class="n">version</span> <span class="s">"1.8.0_45"</span>  
<span class="nc">Java</span><span class="o">(</span><span class="no">TM</span><span class="o">)</span> <span class="no">SE</span> <span class="nc">Runtime</span> <span class="nf">Environment</span> <span class="o">(</span><span class="n">build</span> <span class="mf">1.8</span><span class="o">.</span><span class="mi">0_45</span><span class="o">-</span><span class="n">b15</span><span class="o">)</span>  
<span class="nc">Java</span> <span class="nf">HotSpot</span><span class="o">(</span><span class="no">TM</span><span class="o">)</span> <span class="nc">Client</span> <span class="nf">VM</span> <span class="o">(</span><span class="n">build</span> <span class="mf">25.45</span><span class="o">-</span><span class="n">b02</span><span class="o">,</span> <span class="n">mixed</span> <span class="n">mode</span><span class="o">,</span> <span class="n">sharing</span><span class="o">)</span>
</code></pre></div></div>
<p>To understand this, lets start by taking the journey of understanding compiler and interpreter.</p>

<h2 id="interpreter">Interpreter</h2>

<p>A pure interpreter translates and executes high level code. If the same set of high level code is encountered again, the interpretation happens all over again. If an error is encountered during the run, the error is thrown and the interpretation comes to a halt. An error in a code path that is rarely taken may not be caught and corrected well ahead.</p>

<p>An interpreter does not require to go through the entire code and convert it to machine code. It can right away start interpreting statement by statement! This makes interpreter ideal for scripting.</p>

<p>Essentially, an interpreter is quick to start, halts on error and has less room for code optimization.</p>

<h2 id="compiler">Compiler</h2>

<p>A compiler reads the entire code, optimizes the code to the native platform and converts the high level code to machine code. All errors in the code are reported.</p>

<p>This makes compiler a slow starter and it needs fair amount of time to compile and optimize code. However, once compiled the execution is way faster as the code is optimized for the platform.</p>

<p>Essentially, a compiler is slow to start, reports all errors well ahead and executes optimized machine code.</p>

<h2 id="javac---java-file-is-compiled">Javac - .java file is compiled</h2>

<p>We need to download <a href="https://en.wikipedia.org/wiki/Java_Development_Kit">JDK (Java Development Kit)</a> for a given platform, in order to compile a high level Java code.  The Java file is fed to a Java compiler, namely “javac”. Since, javac is a compiler, it parses the entire code and generates an optimized machine code called “bytecode” for a hypothetical machine. All instructions in the machine code thus generated has one-byte opcode. Hence the name  bytecode. Thus generated bytecode is written to file (class file) with extension “.class”.</p>

<h2 id="class-file">Class File</h2>

<p>A class file is platform independent.  That is, a class file generated on Linux can be executed on Windows and vice versa. Once a class file is generated, it can be shared with other Java programmers working on various platforms. In the real world, however, similar class files are grouped in to packages and archived into <a href="https://en.wikipedia.org/wiki/JAR_%28file_format%29">JAR (Java Archive)</a> files and then shared.</p>

<h2 id="java---class-file-is-compiled-and-interpreted-hotspot">Java - .class file is compiled and interpreted (HotSpot)</h2>

<p>We need to download the <a href="https://en.wikipedia.org/wiki/Java_virtual_machine#Heap">JRE (Java Runtime Environment)</a>  for a given platform, in order to execute the class file. JRE is part of JDK. The .class file is fed to Java virtual machine (JVM), namely “java”. JVM, by default executes in a mode called HotSpot. However, optionally, JVM can execute in pure interpreter mode as well.</p>

<p>JVM starts by interpreting the class file. That is the byte code in the class file is converted, on the fly, to the machine code of the current platform and executed. This provides a quick start. However, typically programs encounter sections of code (set of instructions) that are repeated. For example, loops or multiple invocations of a function. Consider an iteration (loop). The same set of instructions are executed over and over again.</p>

<p>To over simply, lets consider an example. Lets say the byte codes shall translate to machine code for a given platform as follows:</p>

<table>
  <thead>
    <tr>
      <th>Byte Code</th>
      <th>Machine Code</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>a1<br>a2<br>
</td>
      <td>b3</td>
    </tr>
    <tr>
      <td>a3</td>
      <td>b4<br>b5<br>
</td>
    </tr>
    <tr>
      <td>a4<br>a5<br>a6</td>
      <td>b2</td>
    </tr>
  </tbody>
</table>

<p>An interpreter shall translate “a1, a2” to “b3” and execute. It shall then translate “a3” to “b4, b5” and execute. And so on. Since the above instructions are in a loop, the same amount of time is taken, for example, to translate “a1, a2” to “b3”, even though the same thing is being done for the nth time. This makes pure interpreter very inefficient in executing repetitive code.</p>

<p>We could identify that the code block “a1, a2, a3, a4, a5, a6” is being hit several times. Store the translation “b3, b4, b5, b2”. Use the translation next time we hit the same code block. This would definitely be faster than interpreting the code block every single time. However, execution of a frequently used code block can be made faster by compiling it.</p>

<p>A big advantage of compilation is optimization. Compilation treats a set of bytecode instructions as a whole and converts them into optimized machine code for the platform. For example, “a1, a2, a3, a4, a5, a6” could be compiled into “b1, b8”. Executing “b1,b8” would accomplish the same task, but way faster. Execution of compiled code is faster, but compilation itself is time consuming. Thus, it becomes necessary to carefully select the code block that is worth compiling. This code block is a Hot Spot.</p>

<p>While the JVM is interpreting code, it identifies Hot Spots. The execution does not stop. Interpretation continues, while the hot spot is being compiled. Once  the compiled (and optimized) code is ready,  next time the hot spot is hit, JVM executes the compiled code.</p>

<p>Below is a demo to race two JVMs, one running in pure interpreter mode, the other running the same code in default HotSpot mode. The code both JVMs are running has lot of laborious repetitive tasks. In other words, there is a good Hot Spot out there. Identifying and compiling should yield benefits. Let the race begin!</p>

<p><a href="https://www.youtube.com/watch?v=yrjc7mOh_Wc"><img src="/assets/images/java/Duke.png" alt="HotSpot Vs Interpreter"></a></p>

<p>The above demo features two windows that are the result of executing the same Java classes in two different modes.</p>

<p>The first window starts the JVM in pure interpreter mode as follows</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">start</span> <span class="n">java</span> <span class="o">-</span><span class="nc">Xint</span> <span class="nc">HotSpotDemo</span> <span class="nc">Interpretter</span>
</code></pre></div></div>
<p>The second window starts the JVM in default HotSpot mode as follows</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">start</span> <span class="n">java</span> <span class="nc">HotSpotDemo</span> <span class="nc">HotSpot</span>
</code></pre></div></div>
<p>In both windows, we find stacked up glass bricks that are hiding a picture. Glass bricks are removed one by one to reveal the picture. A laborious task needs to be completed before removing the glass brick. This laborious task becomes the HotSpot. The demo reports the time taken to remove all glass bricks from the moment the start button is pushed.</p>

        </div>

        <div class="card-footer">
            
        </div>

    </div>

</div>
</div>
                <!-- <div id="footer" class="w-100"><div class="footer">
    <div class="footer-col footer-col-1">
    <ul class="contact-list">
      <li>
        <span class="site-author">
           
             Raghunandan.Seshadri
           
        </span>
      </li>

      
      <li><a href="mailto:raghubs81@gmail.com">raghubs81@gmail.com</a></li>
      

      
      <li>
        <a href="https://github.com/cafeduke"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">cafeduke</span></a>

      </li>
      

    </ul>
    </div>

    <div class="footer-col footer-col-2">
     <ul class="contact-list">
        
           <li>Duke notes. Happy learning!</li>
        
     </ul>
    </div>
</div></div> -->
            </div>
        </div>
    </div>

    <!-- JS -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>

<!-- Popper -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>

<!-- Bootstrap -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<!-- Material JavaScript on top of Bootstrap JavaScript -->
<script src="/assets/daemonite-material/js/material.min.js"></script>

<!-- Include and configure MathJax -->
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({
      jax: ["input/AsciiMath", "input/TeX", "input/MathML", "output/HTML-CSS"],
      asciimath2jax: {
         delimiters: [['`','`'], ['$$','$$'], ['$','$']]
      },
      "HTML-CSS": {
         preferredFont:"TeX", availableFonts:["STIX","TeX"]
      }
   });
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>

<script src="/assets/js/mermaid.min.js"></script>

<!-- Google analytics -->


<!-- Sidebar -->
<script src="/assets/js/sidebar.js"></script>



   </body>

</html>
